{"remainingRequest":"/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/src/components/sys/basic/PosMana.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/src/components/sys/basic/PosMana.vue","mtime":1625467519759},{"path":"/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUG9zTWFuYSIsCgogIC8q5qC55o2uVnVl5a6e5L6L55qE55Sf5ZG95ZGo5pyf77yM5b2T54K55Ye74oCc6IGM5L2N566h55CG4oCd6L+Z5Liq6YCJ6aG55Y2h5pe277yM5bqU6K+l5Y675Yid5aeL5YyW6L+Z5Liq6KGo5qC877yM6YKj5LmI5oqKaW5pdFBvc2l0aW9uc+i/meS4quaWueazleaUvuWcqG1vdW50ZWQoKemHjOmdouWwseWPr+S7peWunueOsCovCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdFBvc2l0aW9ucygpOwogIH0sCgogIGRhdGEoKXsKICAgIHJldHVybnsKICAgICAgcG9zOnsKICAgICAgICBuYW1lOicnLAogICAgICB9LAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgcG9zaXRpb25zOltdLAogICAgICAvKuadpeWIsHNob3dFZGl0Vmlld+mhtemdoueahOaXtuWAme+8jOS8muaKiuWOn+adpeeahOaVsOaNrmRhdGHotYvlgLznu5l1cGRhdGVQb3MqLwogICAgICB1cGRhdGVQb3M6ewogICAgICAgIG5hbWU6JycsCiAgICAgICAgZW5hYmxlZDpmYWxzZQogICAgICB9LAogICAgICAvKui/meS4quWxnuaAp+ihqOekuueahOaYr+WkmumAieahhuS4remAieS4reeahOmhuSovCiAgICAgIG11bHRpcGxlU2VsZWN0aW9uOiBbXSwKCiAgICB9CiAgfSwKICBtZXRob2RzOnsKICAgIGFkZFBvc2l0aW9uKCl7CiAgICAgIGlmKHRoaXMucG9zLm5hbWUpewogICAgICAgIHRoaXMucG9zdFJlcXVlc3QoIi9zeXN0ZW0vYmFzaWMvcG9zLyIsIHRoaXMucG9zKS50aGVuKHJlc3AgPT4gewogICAgICAgICAgaWYocmVzcCl7CiAgICAgICAgICAgIHRoaXMuaW5pdFBvc2l0aW9ucygpOwogICAgICAgICAgICB0aGlzLnBvcy5uYW1lPScnCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfWVsc2V7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6IGM5L2N5ZCN56ew5LiN5Y+v5Lul5Li656m677yBJyk7CiAgICAgIH0KICAgIH0sCiAgICBpbml0UG9zaXRpb25zKCl7CiAgICAgIHRoaXMuZ2V0UmVxdWVzdCgiL3N5c3RlbS9iYXNpYy9wb3MvIikudGhlbihyZXNwID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwKQogICAgICAgIGlmKHJlc3ApewogICAgICAgICAgdGhpcy5wb3NpdGlvbnMgPSByZXNwOwogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBzaG93RWRpdFZpZXcoaW5kZXgsIGRhdGEpewogICAgICAvKuadpeWIsHNob3dFZGl0Vmlld+mhtemdoueahOaXtuWAme+8jOS8muaKiuWOn+adpeeahOaVsOaNrmRhdGHotYvlgLznu5l1cGRhdGVQb3MqLwogICAgICBPYmplY3QuYXNzaWduKHRoaXMudXBkYXRlUG9zLCBkYXRhKTsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVEZWxldGUoaW5kZXgsIGRhdGEpewogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbliKDpmaTjgJAnICsgZGF0YS5uYW1lICsgJ+OAkeiBjOS9jSwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpPT57CiAgICAgICAgdGhpcy5kZWxldGVSZXF1ZXN0KCIvc3lzdGVtL2Jhc2ljL3Bvcy8iICsgZGF0YS5pZCkudGhlbihyZXNwID0+IHsKICAgICAgICAgIGlmIChyZXNwKSB7CiAgICAgICAgICAgIHRoaXMuaW5pdFBvc2l0aW9ucygpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pLmNhdGNoKCgpPT57CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBkb1VwZGF0ZSgpewogICAgICAgIHRoaXMucHV0UmVxdWVzdCgiL3N5c3RlbS9iYXNpYy9wb3MvIiwgdGhpcy51cGRhdGVQb3MpLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgICBpZihyZXNwKXsKICAgICAgICAgICAgdGhpcy5pbml0UG9zaXRpb25zKCk7CiAgICAgICAgICAgIHRoaXMudXBkYXRlUG9zLm5hbWU9Jyc7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICB9LAogICAgLyrngrnkuoblpJrpgInmoYbkuYvlkI7lsLHkvJrop6blj5Hov5nkuKrngrnlh7vkuovku7YqLwogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLm11bHRpcGxlU2VsZWN0aW9uID0gdmFsOwogICAgfSwKICAgIGRlbGV0ZU1hbnkoKXsKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk44CQJyArIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24ubGVuZ3RoICsgJ+OAkeadoeiusOW9lSwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBsZXQgaWRzID0gJz8nOwogICAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24uZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgIGlkcyArPSAnaWRzPScgKyBpdGVtLmlkICsgJyYnOwogICAgICAgIH0pCiAgICAgICAgdGhpcy5kZWxldGVSZXF1ZXN0KCIvc3lzdGVtL2Jhc2ljL3Bvcy8iICsgaWRzKS50aGVuKHJlc3AgPT4gewogICAgICAgICAgaWYgKHJlc3ApIHsKICAgICAgICAgICAgdGhpcy5pbml0UG9zaXRpb25zKCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogIH0KfQo="},{"version":3,"sources":["PosMana.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PosMana.vue","sourceRoot":"src/components/sys/basic","sourcesContent":["<template>\n  <div>\n    <div>\n      <!--input输入框-->\n      <!--prefix-icon表示添加职位的图标\n      v-model表示要添加的数据，以json的形式上传-->\n      <el-input\n          size=\"small\"\n          class=\"addPosInput\"\n          element-loading-text=\"正在加载...\"\n          element-loading-spinner=\"el-icon-loading\"\n          element-loading-background=\"rgba(0, 0, 0, 0.8)\"\n          placeholder=\"添加职位...\"\n          prefix-icon=\"el-icon-plus\"\n          @keydown.enter.native=\"addPosition\"\n          v-model=\"pos.name\"\n          >\n      </el-input>\n      <el-button icon=\"el-icon-plus\" size=\"small\" type=\"primary\" @click=\"addPosition\">添加</el-button>\n    </div >\n\n    <div class=\"posManaMain\">\n      <!--表格展示数据,展示的是从服务端返回的数据positions-->\n      <el-table\n            :data=\"positions\"\n            border\n            size=\"small\"\n            stripe\n            style=\"width: 70%\"\n            @selection-change=\"handleSelectionChange\">\n<!--        选择框selection-->\n        <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n\n        <el-table-column prop=\"id\" label=\"编号\" width=\"55\"></el-table-column>\n        <el-table-column prop=\"name\" label=\"职位名称\" width=\"180\"></el-table-column>\n        <el-table-column prop=\"createDate\" label=\"创建时间\" width=\"150\"></el-table-column>\n        <el-table-column  label=\"是否启用\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-tag size=\"small\" type=\"success\" v-if=\"scope.row.enabled\">已启用</el-tag>\n            <el-tag size=\"small\" type=\"danger\" v-else>未启用</el-tag>\n          </template>\n        </el-table-column>\n\n        <el-table-column  label=\"操作\" width=\"180\">\n<!--          slot-scope表示一个占位符，scope.$index表示是第几行的数据，scope.row表示是这一行的json数据-->\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" @click=\"showEditView(scope.$index, scope.row)\">编辑</el-button>\n            <el-button size=\"mini\" type=\"danger\" @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-button size=\"small\" type=\"danger\" style=\"margin-top: 8px\" :disabled=\"multipleSelection.length==0\"\n                 @click=\"deleteMany\">\n        批量删除</el-button>\n\n<!--      弹出编辑对话框-->\n      <el-dialog\n          title=\"修改职位\"\n          :visible.sync=\"dialogVisible\"\n          width=\"30%\">\n        <div>\n          <div>\n            <el-tag>职位名称</el-tag>\n            <el-input class=\"updatePosInput\" size=\"small\" v-model=\"updatePos.name\"></el-input>\n          </div>\n          <div>\n            <el-tag style=\"margin-top: 8px\">是否启用</el-tag>\n            <el-switch class=\"PosEnabled\" v-model=\"updatePos.enabled\" active-text=\"启用\" inactive-text=\"禁用\"></el-switch>\n          </div>\n        </div>\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button size=\"small\" @click=\"dialogVisible = false\">取 消</el-button>\n          <el-button size=\"small\" type=\"primary\" @click=\"doUpdate\">确 定</el-button>\n      </span>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"PosMana\",\n\n  /*根据Vue实例的生命周期，当点击“职位管理”这个选项卡时，应该去初始化这个表格，那么把initPositions这个方法放在mounted()里面就可以实现*/\n  mounted() {\n    this.initPositions();\n  },\n\n  data(){\n    return{\n      pos:{\n        name:'',\n      },\n      dialogVisible: false,\n      positions:[],\n      /*来到showEditView页面的时候，会把原来的数据data赋值给updatePos*/\n      updatePos:{\n        name:'',\n        enabled:false\n      },\n      /*这个属性表示的是多选框中选中的项*/\n      multipleSelection: [],\n\n    }\n  },\n  methods:{\n    addPosition(){\n      if(this.pos.name){\n        this.postRequest(\"/system/basic/pos/\", this.pos).then(resp => {\n          if(resp){\n            this.initPositions();\n            this.pos.name=''\n          }\n        })\n      }else{\n        this.$message.error('职位名称不可以为空！');\n      }\n    },\n    initPositions(){\n      this.getRequest(\"/system/basic/pos/\").then(resp => {\n        console.log(resp)\n        if(resp){\n          this.positions = resp;\n        }\n      })\n    },\n    showEditView(index, data){\n      /*来到showEditView页面的时候，会把原来的数据data赋值给updatePos*/\n      Object.assign(this.updatePos, data);\n      this.dialogVisible = true;\n    },\n    handleDelete(index, data){\n      this.$confirm('此操作将删除【' + data.name + '】职位, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(()=>{\n        this.deleteRequest(\"/system/basic/pos/\" + data.id).then(resp => {\n          if (resp) {\n            this.initPositions();\n          }\n        })\n      }).catch(()=>{\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    doUpdate(){\n        this.putRequest(\"/system/basic/pos/\", this.updatePos).then(resp => {\n          if(resp){\n            this.initPositions();\n            this.updatePos.name='';\n            this.dialogVisible = false;\n          }\n        })\n    },\n    /*点了多选框之后就会触发这个点击事件*/\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    deleteMany(){\n      this.$confirm('此操作将永久删除【' + this.multipleSelection.length + '】条记录, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        let ids = '?';\n        this.multipleSelection.forEach(item => {\n          ids += 'ids=' + item.id + '&';\n        })\n        this.deleteRequest(\"/system/basic/pos/\" + ids).then(resp => {\n          if (resp) {\n            this.initPositions();\n          }\n        })\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n  }\n}\n</script>\n\n<style scoped>\n.addPosInput {\n  width: 300px;\n  margin-right: 8px\n}\n.posManaMain {\n  margin-top: 10px;\n}\n.updatePosInput {\n  width: 200px;\n  margin-left: 8px;\n}\n.PosEnabled{\n  margin-left: 18px;\n}\n</style>"]}]}