{"remainingRequest":"/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/node_modules/babel-loader/lib/index.js!/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/src/utils/menus.js","dependencies":[{"path":"/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/src/utils/menus.js","mtime":1625467519760},{"path":"/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwoKLyrov5nmmK/kuIDkuKrlt6XlhbfnsbvvvIznrKzkuIDkuKrlip/og73mmK/miorlkI7nq6/kvKDmnaXnmoRqc29u55qETWVudeeahExpc3TmlbDnu4TliqDliLByb3V0ZXIuanPph4zpnaLvvIjmoLzlvI/ljJbkuYvlkI7nmoRyb3V0ZXPmlbDnu4TliqDliLByb3V0ZXIuanPph4zpnaLvvInvvIzlhbbkuK1jb21wb25lbnTlrZfnrKbkuLLopoHovazljJbmiJDkuIDkuKrnu4Tku7bvvIzlnKjlkI7pnaLliqDkuIoudnVlKi8KCi8q56ys5LqM5Liq5Yqf6IO95bCx5piv5oqK5qC85byP5YyW5LmL5ZCO55qEcm91dGVz5pWw57uE5pS+5Yiwc3RvcmXph4zpnaLvvIzpgJrov4dzdG9yZS5jb21taXQoJ2luaXRSb3V0ZXMnLCBmbXRSb3V0ZXMp5p2l5a6e546wKi8KaW1wb3J0IHsgZ2V0UmVxdWVzdCB9IGZyb20gIi4vYXBpIjsKLyrku47mnI3liqHnq6/liqDovb3lpb3nmoRyb3V0ZXPlkJFyb3V0ZXLph4zpnaLliqDvvIznhLblkI7lho3kv53lrZjlnKjlnKhzdG9yZemHjOmdoiovCgpleHBvcnQgdmFyIGluaXRNZW51ID0gZnVuY3Rpb24gaW5pdE1lbnUocm91dGVyLCBzdG9yZSkgewogIGlmIChzdG9yZS5zdGF0ZS5yb3V0ZXMubGVuZ3RoID4gMCkgewogICAgLyror7TmmI7ph4zpnaLmnInoj5zljZXmlbDmja7vvIzkuI3nlKjliqDovb0qLwogICAgcmV0dXJuOwogIH0KICAvKuWmguaenOeUqOaIt+aMieS6hkY15Yi35paw6aG16Z2i77yM5q2k5pe255qEc3RvcmXph4zpnaLnmoRyb3V0ZXPmlbDnu4TnmoTplb/luqblsLHmmK8w77yM6KaB5omn6KGM5LiL6Z2i55qE5pa55rOVKi8KCiAgLypkYXRh5piv6K+35rGC5Zue5p2l55qE5pWw5o2u77yM5LuOcG9zdG1hbuWPr+S7peefpemBk+aYr+S4gOS4qk1lbnXmlbDnu4QqLwoKCiAgZ2V0UmVxdWVzdCgnL3N5c3RlbS9jb25maWcvbWVudScpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgIGlmIChkYXRhKSB7CiAgICAgIHZhciBmbXRSb3V0ZXMgPSBmb3JtYXRSb3V0ZXMoZGF0YSk7CiAgICAgIC8q5oqK5qC85byP5YyW5LmL5ZCO55qEZm10Um91dGVz5Yqg5YWl5Yiwcm91dGVy6YeM6Z2iKi8KCiAgICAgIHJvdXRlci5hZGRSb3V0ZXMoZm10Um91dGVzKTsKICAgICAgLyrlnKhzdG9yZemHjOmdouWOu+iwg+eUqGluaXRSb3V0ZXPmlrnms5XvvIzlj4LmlbDlsLHmmK9mbXRSb3V0ZXMqLwoKICAgICAgc3RvcmUuY29tbWl0KCdpbml0Um91dGVzJywgZm10Um91dGVzKTsKICAgIH0KICB9KTsKfTsKZXhwb3J0IHZhciBmb3JtYXRSb3V0ZXMgPSBmdW5jdGlvbiBmb3JtYXRSb3V0ZXMocm91dGVzKSB7CiAgdmFyIGZtUm91dGVzID0gW107CiAgcm91dGVzLmZvckVhY2goZnVuY3Rpb24gKHJvdXRlcikgewogICAgdmFyIHBhdGggPSByb3V0ZXIucGF0aCwKICAgICAgICBfY29tcG9uZW50ID0gcm91dGVyLmNvbXBvbmVudCwKICAgICAgICBuYW1lID0gcm91dGVyLm5hbWUsCiAgICAgICAgbWV0YSA9IHJvdXRlci5tZXRhLAogICAgICAgIGljb25DbHMgPSByb3V0ZXIuaWNvbkNscywKICAgICAgICBjaGlsZHJlbiA9IHJvdXRlci5jaGlsZHJlbjsKICAgIC8q5aaC5p6cY2hpbGRyZW4gaW5zdGFuY2VvZiBBcnJhee+8jOivtOaYjui/meS4qmNoaWxkcmVu5piv5LiA57qn6I+c5Y2V55qEY2hpbGRyZW7vvIzpgqPkuYjlsLHpgJLlvZLljrvosIPnlKgqLwoKICAgIGlmIChjaGlsZHJlbiAmJiBjaGlsZHJlbiBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgIGNoaWxkcmVuID0gZm9ybWF0Um91dGVzKGNoaWxkcmVuKTsKICAgIH0KCiAgICB2YXIgZm1Sb3V0ZXIgPSB7CiAgICAgIHBhdGg6IHBhdGgsCiAgICAgIG5hbWU6IG5hbWUsCiAgICAgIGljb25DbHM6IGljb25DbHMsCiAgICAgIG1ldGE6IG1ldGEsCiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlbiwKICAgICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQocmVzb2x2ZSkgewogICAgICAgIC8q5oqK5ZCO56uv5Lyg5p2l55qEY29tcG9uZW505a2X56ym5Liy5Y+Y5oiQ5LiA5Liq57uE5Lu2Ki8KCiAgICAgICAgLyrmoLnmja7lkI7nq6/kvKDmnaXnmoTnu4Tku7bnmoTliY3nvIDkuI3lkIzvvIzljrvkuI3lkIznmoTnm67lvZXkuIvliqDovb3kuI3lkIznmoTnu4Tku7YqLwogICAgICAgIGlmIChfY29tcG9uZW50LnN0YXJ0c1dpdGgoIkVtcCIpKSB7CiAgICAgICAgICByZXF1aXJlKFsnLi4vdmlld3MvZW1wLycgKyBfY29tcG9uZW50ICsgJy52dWUnXSwgcmVzb2x2ZSk7CiAgICAgICAgfSBlbHNlIGlmIChfY29tcG9uZW50LnN0YXJ0c1dpdGgoIlBlciIpKSB7CiAgICAgICAgICByZXF1aXJlKFsnLi4vdmlld3MvcGVyLycgKyBfY29tcG9uZW50ICsgJy52dWUnXSwgcmVzb2x2ZSk7CiAgICAgICAgfSBlbHNlIGlmIChfY29tcG9uZW50LnN0YXJ0c1dpdGgoIlNhbCIpKSB7CiAgICAgICAgICByZXF1aXJlKFsnLi4vdmlld3Mvc2FsLycgKyBfY29tcG9uZW50ICsgJy52dWUnXSwgcmVzb2x2ZSk7CiAgICAgICAgfSBlbHNlIGlmIChfY29tcG9uZW50LnN0YXJ0c1dpdGgoIlN5cyIpKSB7CiAgICAgICAgICByZXF1aXJlKFsnLi4vdmlld3Mvc3lzLycgKyBfY29tcG9uZW50ICsgJy52dWUnXSwgcmVzb2x2ZSk7CiAgICAgICAgfSBlbHNlIGlmIChfY29tcG9uZW50LnN0YXJ0c1dpdGgoIlN0YSIpKSB7CiAgICAgICAgICByZXF1aXJlKFsnLi4vdmlld3Mvc3RhLycgKyBfY29tcG9uZW50ICsgJy52dWUnXSwgcmVzb2x2ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlcXVpcmUoWycuLi92aWV3cy8nICsgX2NvbXBvbmVudCArICcudnVlJ10sIHJlc29sdmUpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIGZtUm91dGVzLnB1c2goZm1Sb3V0ZXIpOwogIH0pOwogIHJldHVybiBmbVJvdXRlczsKfTs="},{"version":3,"sources":["/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/src/utils/menus.js"],"names":["getRequest","initMenu","router","store","state","routes","length","then","data","fmtRoutes","formatRoutes","addRoutes","commit","fmRoutes","forEach","path","component","name","meta","iconCls","children","Array","fmRouter","resolve","startsWith","require","push"],"mappings":"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","sourcesContent":["/*这是一个工具类，第一个功能是把后端传来的json的Menu的List数组加到router.js里面（格式化之后的routes数组加到router.js里面），其中component字符串要转化成一个组件，在后面加上.vue*/\n/*第二个功能就是把格式化之后的routes数组放到store里面，通过store.commit('initRoutes', fmtRoutes)来实现*/\nimport {getRequest} from \"./api\";\n/*从服务端加载好的routes向router里面加，然后再保存在在store里面*/\nexport const initMenu = (router, store) =>{\n    if(store.state.routes.length > 0){\n        /*说明里面有菜单数据，不用加载*/\n        return;\n    }\n    /*如果用户按了F5刷新页面，此时的store里面的routes数组的长度就是0，要执行下面的方法*/\n    /*data是请求回来的数据，从postman可以知道是一个Menu数组*/\n    getRequest('/system/config/menu').then(data=>{\n        if(data){\n            let fmtRoutes = formatRoutes(data);\n            /*把格式化之后的fmtRoutes加入到router里面*/\n            router.addRoutes(fmtRoutes);\n            /*在store里面去调用initRoutes方法，参数就是fmtRoutes*/\n            store.commit('initRoutes', fmtRoutes)\n        }\n    })\n}\n\nexport const formatRoutes = (routes) => {\n    let fmRoutes = [];\n    routes.forEach(router =>{\n        let{\n            path,\n            component,\n            name,\n            meta,\n            iconCls,\n            children\n        } = router;\n        /*如果children instanceof Array，说明这个children是一级菜单的children，那么就递归去调用*/\n        if(children && children instanceof Array){\n            children = formatRoutes(children)\n        }\n        let fmRouter = {\n            path:path,\n            name:name,\n            iconCls:iconCls,\n            meta:meta,\n            children:children,\n            component(resolve){\n                /*把后端传来的component字符串变成一个组件*/\n                /*根据后端传来的组件的前缀不同，去不同的目录下加载不同的组件*/\n                if(component.startsWith(\"Emp\")){\n                    require(['../views/emp/'+component+'.vue'], resolve);\n                }else if(component.startsWith(\"Per\")){\n                    require(['../views/per/'+component+'.vue'], resolve);\n                }else if(component.startsWith(\"Sal\")){\n                    require(['../views/sal/'+component+'.vue'], resolve);\n                }else if(component.startsWith(\"Sys\")){\n                    require(['../views/sys/'+component+'.vue'], resolve);\n                }else if(component.startsWith(\"Sta\")){\n                    require(['../views/sta/'+component+'.vue'], resolve);\n                }else{\n                    require(['../views/'+component+'.vue'], resolve);\n                }\n            }\n        }\n        fmRoutes.push(fmRouter);\n    })\n    return fmRoutes;\n}"]}]}