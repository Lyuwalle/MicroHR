{"remainingRequest":"/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/node_modules/babel-loader/lib/index.js!/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/src/views/sys/SysHr.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/src/views/sys/SysHr.vue","mtime":1625467519762},{"path":"/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyuxiyang/Documents/gitProject/microhr/vuehr/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlN5c0Jhc2ljIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAga2V5d29yZHM6ICcnLAogICAgICBocnM6IFtdLAogICAgICBzZWxlY3RlZFJvbGVzOiBbXSwKICAgICAgYWxscm9sZXM6IFtdCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdEhycygpOwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdEFsbFJvbGVzOiBmdW5jdGlvbiBpbml0QWxsUm9sZXMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmdldFJlcXVlc3QoIi9zeXN0ZW0vaHIvcm9sZXMiKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgaWYgKHJlc3ApIHsKICAgICAgICAgIF90aGlzLmFsbHJvbGVzID0gcmVzcDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGhpZGVQb3A6IGZ1bmN0aW9uIGhpZGVQb3AoaHIpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgcm9sZXMgPSBbXTsKICAgICAgT2JqZWN0LmFzc2lnbihyb2xlcywgaHIucm9sZXMpOwogICAgICB2YXIgZmxhZyA9IGZhbHNlOwoKICAgICAgaWYgKHJvbGVzLmxlbmd0aCAhPSB0aGlzLnNlbGVjdGVkUm9sZXMubGVuZ3RoKSB7CiAgICAgICAgZmxhZyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb2xlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIHJvbGUgPSByb2xlc1tpXTsKCiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuc2VsZWN0ZWRSb2xlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICB2YXIgc3IgPSB0aGlzLnNlbGVjdGVkUm9sZXNbal07CgogICAgICAgICAgICBpZiAocm9sZS5pZCA9PSBzcikgewogICAgICAgICAgICAgIHJvbGVzLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICBpLS07CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChyb2xlcy5sZW5ndGggIT0gMCkgewogICAgICAgICAgZmxhZyA9IHRydWU7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoZmxhZykgewogICAgICAgIHZhciB1cmwgPSAnL3N5c3RlbS9oci9yb2xlP2hyaWQ9JyArIGhyLmlkOwogICAgICAgIHRoaXMuc2VsZWN0ZWRSb2xlcy5mb3JFYWNoKGZ1bmN0aW9uIChzcikgewogICAgICAgICAgdXJsICs9ICcmcmlkcz0nICsgc3I7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5wdXRSZXF1ZXN0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgaWYgKHJlc3ApIHsKICAgICAgICAgICAgX3RoaXMyLmluaXRIcnMoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHNob3dQb3A6IGZ1bmN0aW9uIHNob3dQb3AoaHIpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLmluaXRBbGxSb2xlcygpOwogICAgICB2YXIgcm9sZXMgPSBoci5yb2xlczsKICAgICAgdGhpcy5zZWxlY3RlZFJvbGVzID0gW107CiAgICAgIHJvbGVzLmZvckVhY2goZnVuY3Rpb24gKHIpIHsKICAgICAgICBfdGhpczMuc2VsZWN0ZWRSb2xlcy5wdXNoKHIuaWQpOwogICAgICB9KTsKICAgIH0sCiAgICBlbmFibGVkQ2hhbmdlOiBmdW5jdGlvbiBlbmFibGVkQ2hhbmdlKGhyKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgZGVsZXRlIGhyLnJvbGVzOwogICAgICB0aGlzLnB1dFJlcXVlc3QoIi9zeXN0ZW0vaHIvIiwgaHIpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBpZiAocmVzcCkgewogICAgICAgICAgX3RoaXM0LmluaXRIcnMoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZUhyOiBmdW5jdGlvbiBkZWxldGVIcihocikgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOOAkCcgKyBoci5uYW1lICsgJ+OAkSwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczUuZGVsZXRlUmVxdWVzdCgiL3N5c3RlbS9oci8iICsgaHIuaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgIGlmIChyZXNwKSB7CiAgICAgICAgICAgIF90aGlzNS5pbml0SHJzKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczUuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZG9TZWFyY2g6IGZ1bmN0aW9uIGRvU2VhcmNoKCkgewogICAgICB0aGlzLmluaXRIcnMoKTsKICAgIH0sCiAgICBpbml0SHJzOiBmdW5jdGlvbiBpbml0SHJzKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHRoaXMuZ2V0UmVxdWVzdCgiL3N5c3RlbS9oci8/a2V5d29yZHM9IiArIHRoaXMua2V5d29yZHMpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBpZiAocmVzcCkgewogICAgICAgICAgX3RoaXM2LmhycyA9IHJlc3A7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["SysHr.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,GAAA,EAAA,EAFA;AAGA,MAAA,aAAA,EAAA,EAHA;AAIA,MAAA,QAAA,EAAA;AAJA,KAAA;AAMA,GATA;AAUA,EAAA,OAVA,qBAUA;AACA,SAAA,OAAA;AACA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,0BACA;AAAA;;AACA,WAAA,UAAA,CAAA,kBAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA;AACA,OAJA;AAKA,KAPA;AAQA,IAAA,OARA,mBAQA,EARA,EAQA;AAAA;;AACA,UAAA,KAAA,GAAA,EAAA;AACA,MAAA,MAAA,CAAA,MAAA,CAAA,KAAA,EAAA,EAAA,CAAA,KAAA;AACA,UAAA,IAAA,GAAA,KAAA;;AACA,UAAA,KAAA,CAAA,MAAA,IAAA,KAAA,aAAA,CAAA,MAAA,EAAA;AACA,QAAA,IAAA,GAAA,IAAA;AACA,OAFA,MAEA;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,cAAA,IAAA,GAAA,KAAA,CAAA,CAAA,CAAA;;AACA,eAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,aAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,gBAAA,EAAA,GAAA,KAAA,aAAA,CAAA,CAAA,CAAA;;AACA,gBAAA,IAAA,CAAA,EAAA,IAAA,EAAA,EAAA;AACA,cAAA,KAAA,CAAA,MAAA,CAAA,CAAA,EAAA,CAAA;AACA,cAAA,CAAA;AACA;AACA;AACA;AACA;;AACA,YAAA,KAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,UAAA,IAAA,GAAA,IAAA;AACA;AACA;;AACA,UAAA,IAAA,EAAA;AACA,YAAA,GAAA,GAAA,0BAAA,EAAA,CAAA,EAAA;AACA,aAAA,aAAA,CAAA,OAAA,CAAA,UAAA,EAAA,EAAA;AACA,UAAA,GAAA,IAAA,WAAA,EAAA;AACA,SAFA;AAGA,aAAA,UAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,EAAA;AACA,YAAA,MAAA,CAAA,OAAA;AACA;AACA,SAJA;AAKA;AACA,KAzCA;AA0CA,IAAA,OA1CA,mBA0CA,EA1CA,EA0CA;AAAA;;AACA,WAAA,YAAA;AACA,UAAA,KAAA,GAAA,EAAA,CAAA,KAAA;AACA,WAAA,aAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,QAAA,MAAA,CAAA,aAAA,CAAA,IAAA,CAAA,CAAA,CAAA,EAAA;AACA,OAFA;AAGA,KAjDA;AAkDA,IAAA,aAlDA,yBAkDA,EAlDA,EAkDA;AAAA;;AACA,aAAA,EAAA,CAAA,KAAA;AACA,WAAA,UAAA,CAAA,aAAA,EAAA,EAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,OAAA;AACA;AACA,OAJA;AAKA,KAzDA;AA0DA,IAAA,QA1DA,oBA0DA,EA1DA,EA0DA;AAAA;;AACA,WAAA,QAAA,CAAA,cAAA,EAAA,CAAA,IAAA,GAAA,UAAA,EAAA,IAAA,EAAA;AACA,QAAA,iBAAA,EAAA,IADA;AAEA,QAAA,gBAAA,EAAA,IAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OAAA,EAIA,IAJA,CAIA,YAAA;AACA,QAAA,MAAA,CAAA,aAAA,CAAA,gBAAA,EAAA,CAAA,EAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,EAAA;AACA,YAAA,MAAA,CAAA,OAAA;AACA;AACA,SAJA;AAKA,OAVA,EAUA,KAVA,CAUA,YAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA;AACA,UAAA,IAAA,EAAA,MADA;AAEA,UAAA,OAAA,EAAA;AAFA,SAAA;AAIA,OAfA;AAgBA,KA3EA;AA4EA,IAAA,QA5EA,sBA4EA;AACA,WAAA,OAAA;AACA,KA9EA;AA+EA,IAAA,OA/EA,qBA+EA;AAAA;;AACA,WAAA,UAAA,CAAA,0BAAA,KAAA,QAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,GAAA,GAAA,IAAA;AACA;AACA,OAJA;AAKA;AArFA;AAbA,CAAA","sourcesContent":["<template>\n<!--  操作员管理-->\n  <div>\n    <div style=\"margin-top: 10px;display: flex;justify-content: center\">\n      <el-input v-model=\"keywords\" placeholder=\"通过用户名搜索用户...\" prefix-icon=\"el-icon-search\"\n                style=\"width: 400px;margin-right: 10px\" @keydown.enter.native=\"doSearch\"></el-input>\n      <el-button icon=\"el-icon-search\" type=\"primary\" @click=\"doSearch\">搜索</el-button>\n    </div>\n\n    <div class=\"hr-container\">\n      <el-card class=\"hr-card\" v-for=\"(hr,index) in hrs\" :key=\"index\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>{{hr.name}}</span>\n          <el-button style=\"float: right; padding: 3px 0;color: #e30007;\" type=\"text\"\n                     icon=\"el-icon-delete\" @click=\"deleteHr(hr)\"></el-button>\n        </div>\n        <div>\n<!--          用户头像-->\n          <div class=\"img-container\">\n            <img :src=\"hr.userface\" :alt=\"hr.name\" :title=\"hr.name\" class=\"userface-img\">\n          </div>\n          <div class=\"userinfo-container\">\n            <div>用户名：{{hr.name}}</div>\n            <div>手机号码：{{hr.phone}}</div>\n            <div>电话号码：{{hr.telephone}}</div>\n            <div>地址：{{hr.address}}</div>\n            <div>用户状态：\n              <el-switch\n                  v-model=\"hr.enabled\"\n                  active-text=\"启用\"\n                  @change=\"enabledChange(hr)\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#ff4949\"\n                  inactive-text=\"禁用\">\n              </el-switch>\n            </div>\n            <div>用户角色：\n              <el-tag type=\"success\" style=\"margin-right: 4px\" v-for=\"(role,indexj) in hr.roles\"\n                      :key=\"indexj\">{{role.nameZh}}\n              </el-tag>\n\n\n<!--Popover 弹出框-->\n              <el-popover\n                  placement=\"right\"\n                  title=\"角色列表\"\n                  @show=\"showPop(hr)\"\n                  @hide=\"hidePop(hr)\"\n                  width=\"200\"\n                  trigger=\"click\">\n<!--                selectedRoles表示预选中-->\n                <el-select v-model=\"selectedRoles\" multiple placeholder=\"请选择\">\n<!--                  选择框-->\n                  <el-option\n                      v-for=\"(r,indexk) in allroles\"\n                      :key=\"indexk\"\n                      :label=\"r.nameZh\"\n                      :value=\"r.id\">\n                  </el-option>\n                </el-select>\n                <el-button slot=\"reference\" icon=\"el-icon-more\" type=\"text\"></el-button>\n              </el-popover>\n            </div>\n            <div>备注：{{hr.remark}}</div>\n          </div>\n        </div>\n      </el-card>\n\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"SysBasic\",\n  data(){\n    return{\n      keywords: '',\n      hrs: [],\n      selectedRoles: [],\n      allroles: []\n    }\n  },\n  mounted() {\n    this.initHrs();\n  },\n  methods:{\n    initAllRoles() {\n      this.getRequest(\"/system/hr/roles\").then(resp => {\n        if (resp) {\n          this.allroles = resp;\n        }\n      })\n    },\n    hidePop(hr) {\n      let roles = [];\n      Object.assign(roles, hr.roles);\n      let flag = false;\n      if (roles.length != this.selectedRoles.length) {\n        flag = true;\n      } else {\n        for (let i = 0; i < roles.length; i++) {\n          let role = roles[i];\n          for (let j = 0; j < this.selectedRoles.length; j++) {\n            let sr = this.selectedRoles[j];\n            if (role.id == sr) {\n              roles.splice(i, 1);\n              i--;\n              break;\n            }\n          }\n        }\n        if (roles.length != 0) {\n          flag = true;\n        }\n      }\n      if (flag) {\n        let url = '/system/hr/role?hrid=' + hr.id;\n        this.selectedRoles.forEach(sr => {\n          url += '&rids=' + sr;\n        });\n        this.putRequest(url).then(resp => {\n          if (resp) {\n            this.initHrs();\n          }\n        });\n      }\n    },\n    showPop(hr) {\n      this.initAllRoles();\n      let roles = hr.roles;\n      this.selectedRoles = [];\n      roles.forEach(r => {\n        this.selectedRoles.push(r.id);\n      })\n    },\n    enabledChange(hr) {\n      delete hr.roles;\n      this.putRequest(\"/system/hr/\", hr).then(resp => {\n        if (resp) {\n          this.initHrs();\n        }\n      })\n    },\n    deleteHr(hr) {\n      this.$confirm('此操作将永久删除【'+hr.name+'】, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.deleteRequest(\"/system/hr/\"+hr.id).then(resp=>{\n          if (resp) {\n            this.initHrs();\n          }\n        })\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    doSearch() {\n      this.initHrs();\n    },\n    initHrs() {\n      this.getRequest(\"/system/hr/?keywords=\"+this.keywords).then(resp => {\n        if (resp) {\n          this.hrs = resp;\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.userinfo-container div {\n  font-size: 12px;\n  color: #409eff;\n}\n\n.userinfo-container {\n  margin-top: 20px;\n}\n\n.img-container {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n}\n\n.userface-img {\n  width: 72px;\n  height: 72px;\n  border-radius: 72px;\n}\n\n.hr-container {\n  margin-top: 10px;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n}\n\n.hr-card {\n  width: 350px;\n  margin-bottom: 20px;\n}\n</style>"],"sourceRoot":"src/views/sys"}]}