{"remainingRequest":"D:\\vuehr\\node_modules\\babel-loader\\lib\\index.js!D:\\vuehr\\src\\utils\\menus.js","dependencies":[{"path":"D:\\vuehr\\src\\utils\\menus.js","mtime":1608046221350},{"path":"D:\\vuehr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vuehr\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CgovKui/meaYr+S4gOS4quW3peWFt+exu++8jOesrOS4gOS4quWKn+iDveaYr+aKiuWQjuerr+S8oOadpeeahGpzb27nmoRNZW5155qETGlzdOaVsOe7hOWKoOWIsHJvdXRlci5qc+mHjOmdou+8iOagvOW8j+WMluS5i+WQjueahHJvdXRlc+aVsOe7hOWKoOWIsHJvdXRlci5qc+mHjOmdou+8ie+8jOWFtuS4rWNvbXBvbmVudOWtl+espuS4suimgei9rOWMluaIkOS4gOS4que7hOS7tu+8jOWcqOWQjumdouWKoOS4ii52dWUqLwoKLyrnrKzkuozkuKrlip/og73lsLHmmK/miormoLzlvI/ljJbkuYvlkI7nmoRyb3V0ZXPmlbDnu4TmlL7liLBzdG9yZemHjOmdou+8jOmAmui/h3N0b3JlLmNvbW1pdCgnaW5pdFJvdXRlcycsIGZtdFJvdXRlcynmnaXlrp7njrAqLwppbXBvcnQgeyBnZXRSZXF1ZXN0IH0gZnJvbSAiLi9hcGkiOwovKuS7juacjeWKoeerr+WKoOi9veWlveeahHJvdXRlc+WQkXJvdXRlcumHjOmdouWKoO+8jOeEtuWQjuWGjeS/neWtmOWcqOWcqHN0b3Jl6YeM6Z2iKi8KCmV4cG9ydCB2YXIgaW5pdE1lbnUgPSBmdW5jdGlvbiBpbml0TWVudShyb3V0ZXIsIHN0b3JlKSB7CiAgaWYgKHN0b3JlLnN0YXRlLnJvdXRlcy5sZW5ndGggPiAwKSB7CiAgICAvKuivtOaYjumHjOmdouacieiPnOWNleaVsOaNru+8jOS4jeeUqOWKoOi9vSovCiAgICByZXR1cm47CiAgfQogIC8q5aaC5p6c55So5oi35oyJ5LqGRjXliLfmlrDpobXpnaLvvIzmraTml7bnmoRzdG9yZemHjOmdoueahHJvdXRlc+aVsOe7hOeahOmVv+W6puWwseaYrzDvvIzopoHmiafooYzkuIvpnaLnmoTmlrnms5UqLwoKICAvKmRhdGHmmK/or7fmsYLlm57mnaXnmoTmlbDmja7vvIzku45wb3N0bWFu5Y+v5Lul55+l6YGT5piv5LiA5LiqTWVudeaVsOe7hCovCgoKICBnZXRSZXF1ZXN0KCcvc3lzdGVtL2NvbmZpZy9tZW51JykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgaWYgKGRhdGEpIHsKICAgICAgdmFyIGZtdFJvdXRlcyA9IGZvcm1hdFJvdXRlcyhkYXRhKTsKICAgICAgLyrmiormoLzlvI/ljJbkuYvlkI7nmoRmbXRSb3V0ZXPliqDlhaXliLByb3V0ZXLph4zpnaIqLwoKICAgICAgcm91dGVyLmFkZFJvdXRlcyhmbXRSb3V0ZXMpOwogICAgICAvKuWcqHN0b3Jl6YeM6Z2i5Y676LCD55SoaW5pdFJvdXRlc+aWueazle+8jOWPguaVsOWwseaYr2ZtdFJvdXRlcyovCgogICAgICBzdG9yZS5jb21taXQoJ2luaXRSb3V0ZXMnLCBmbXRSb3V0ZXMpOwogICAgfQogIH0pOwp9OwpleHBvcnQgdmFyIGZvcm1hdFJvdXRlcyA9IGZ1bmN0aW9uIGZvcm1hdFJvdXRlcyhyb3V0ZXMpIHsKICB2YXIgZm1Sb3V0ZXMgPSBbXTsKICByb3V0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm91dGVyKSB7CiAgICB2YXIgcGF0aCA9IHJvdXRlci5wYXRoLAogICAgICAgIF9jb21wb25lbnQgPSByb3V0ZXIuY29tcG9uZW50LAogICAgICAgIG5hbWUgPSByb3V0ZXIubmFtZSwKICAgICAgICBtZXRhID0gcm91dGVyLm1ldGEsCiAgICAgICAgaWNvbkNscyA9IHJvdXRlci5pY29uQ2xzLAogICAgICAgIGNoaWxkcmVuID0gcm91dGVyLmNoaWxkcmVuOwogICAgLyrlpoLmnpxjaGlsZHJlbiBpbnN0YW5jZW9mIEFycmF577yM6K+05piO6L+Z5LiqY2hpbGRyZW7mmK/kuIDnuqfoj5zljZXnmoRjaGlsZHJlbu+8jOmCo+S5iOWwsemAkuW9kuWOu+iwg+eUqCovCgogICAgaWYgKGNoaWxkcmVuICYmIGNoaWxkcmVuIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgY2hpbGRyZW4gPSBmb3JtYXRSb3V0ZXMoY2hpbGRyZW4pOwogICAgfQoKICAgIHZhciBmbVJvdXRlciA9IHsKICAgICAgcGF0aDogcGF0aCwKICAgICAgbmFtZTogbmFtZSwKICAgICAgaWNvbkNsczogaWNvbkNscywKICAgICAgbWV0YTogbWV0YSwKICAgICAgY2hpbGRyZW46IGNoaWxkcmVuLAogICAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudChyZXNvbHZlKSB7CiAgICAgICAgLyrmiorlkI7nq6/kvKDmnaXnmoRjb21wb25lbnTlrZfnrKbkuLLlj5jmiJDkuIDkuKrnu4Tku7YqLwoKICAgICAgICAvKuagueaNruWQjuerr+S8oOadpeeahOe7hOS7tueahOWJjee8gOS4jeWQjO+8jOWOu+S4jeWQjOeahOebruW9leS4i+WKoOi9veS4jeWQjOeahOe7hOS7tiovCiAgICAgICAgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgiRW1wIikpIHsKICAgICAgICAgIHJlcXVpcmUoWycuLi92aWV3cy9lbXAvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9IGVsc2UgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgiUGVyIikpIHsKICAgICAgICAgIHJlcXVpcmUoWycuLi92aWV3cy9wZXIvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9IGVsc2UgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgiU2FsIikpIHsKICAgICAgICAgIHJlcXVpcmUoWycuLi92aWV3cy9zYWwvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9IGVsc2UgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgiU3lzIikpIHsKICAgICAgICAgIHJlcXVpcmUoWycuLi92aWV3cy9zeXMvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9IGVsc2UgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgiU3RhIikpIHsKICAgICAgICAgIHJlcXVpcmUoWycuLi92aWV3cy9zdGEvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVxdWlyZShbJy4uL3ZpZXdzLycgKyBfY29tcG9uZW50ICsgJy52dWUnXSwgcmVzb2x2ZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAgZm1Sb3V0ZXMucHVzaChmbVJvdXRlcik7CiAgfSk7CiAgcmV0dXJuIGZtUm91dGVzOwp9Ow=="},{"version":3,"sources":["D:/vuehr/src/utils/menus.js"],"names":["getRequest","initMenu","router","store","state","routes","length","then","data","fmtRoutes","formatRoutes","addRoutes","commit","fmRoutes","forEach","path","component","name","meta","iconCls","children","Array","fmRouter","resolve","startsWith","require","push"],"mappings":"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","sourcesContent":["/*这是一个工具类，第一个功能是把后端传来的json的Menu的List数组加到router.js里面（格式化之后的routes数组加到router.js里面），其中component字符串要转化成一个组件，在后面加上.vue*/\r\n/*第二个功能就是把格式化之后的routes数组放到store里面，通过store.commit('initRoutes', fmtRoutes)来实现*/\r\nimport {getRequest} from \"./api\";\r\n/*从服务端加载好的routes向router里面加，然后再保存在在store里面*/\r\nexport const initMenu = (router, store) =>{\r\n    if(store.state.routes.length > 0){\r\n        /*说明里面有菜单数据，不用加载*/\r\n        return;\r\n    }\r\n    /*如果用户按了F5刷新页面，此时的store里面的routes数组的长度就是0，要执行下面的方法*/\r\n    /*data是请求回来的数据，从postman可以知道是一个Menu数组*/\r\n    getRequest('/system/config/menu').then(data=>{\r\n        if(data){\r\n            let fmtRoutes = formatRoutes(data);\r\n            /*把格式化之后的fmtRoutes加入到router里面*/\r\n            router.addRoutes(fmtRoutes);\r\n            /*在store里面去调用initRoutes方法，参数就是fmtRoutes*/\r\n            store.commit('initRoutes', fmtRoutes)\r\n        }\r\n    })\r\n}\r\n\r\nexport const formatRoutes = (routes) => {\r\n    let fmRoutes = [];\r\n    routes.forEach(router =>{\r\n        let{\r\n            path,\r\n            component,\r\n            name,\r\n            meta,\r\n            iconCls,\r\n            children\r\n        } = router;\r\n        /*如果children instanceof Array，说明这个children是一级菜单的children，那么就递归去调用*/\r\n        if(children && children instanceof Array){\r\n            children = formatRoutes(children)\r\n        }\r\n        let fmRouter = {\r\n            path:path,\r\n            name:name,\r\n            iconCls:iconCls,\r\n            meta:meta,\r\n            children:children,\r\n            component(resolve){\r\n                /*把后端传来的component字符串变成一个组件*/\r\n                /*根据后端传来的组件的前缀不同，去不同的目录下加载不同的组件*/\r\n                if(component.startsWith(\"Emp\")){\r\n                    require(['../views/emp/'+component+'.vue'], resolve);\r\n                }else if(component.startsWith(\"Per\")){\r\n                    require(['../views/per/'+component+'.vue'], resolve);\r\n                }else if(component.startsWith(\"Sal\")){\r\n                    require(['../views/sal/'+component+'.vue'], resolve);\r\n                }else if(component.startsWith(\"Sys\")){\r\n                    require(['../views/sys/'+component+'.vue'], resolve);\r\n                }else if(component.startsWith(\"Sta\")){\r\n                    require(['../views/sta/'+component+'.vue'], resolve);\r\n                }else{\r\n                    require(['../views/'+component+'.vue'], resolve);\r\n                }\r\n            }\r\n        }\r\n        fmRoutes.push(fmRouter);\r\n    })\r\n    return fmRoutes;\r\n}"]}]}